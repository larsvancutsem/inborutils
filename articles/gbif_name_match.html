<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GBIF scientific name matching • inborutils</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="GBIF scientific name matching">
<meta property="og:description" content="inborutils">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">inborutils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_loaders_examples.html">(Down)load data from external partners</a>
    </li>
    <li>
      <a href="../articles/gbif_name_match.html">GBIF scientific name matching</a>
    </li>
    <li>
      <a href="../articles/guess_projection.html">Check coordinate system</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/inbo/inborutils/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>GBIF scientific name matching</h1>
                        <h4 class="author">Stijn Vanhoey</h4>
                        <h4 class="author">Damiano Oldoni</h4>
            
            <h4 class="date">2021-01-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/inborutils/blob/master/vignettes/gbif_name_match.Rmd"><code>vignettes/gbif_name_match.Rmd</code></a></small>
      <div class="hidden name"><code>gbif_name_match.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Working with different partners/institutes/researchers results in a diversity of taxonomic names to define species. This hardens comparison amongst datasets, as in many occasions, aggregation is aimed for or filtering on specific species. By translating all species names to a common taxonomic backbone (ensuring unique ID’s for each species name), this can be done. The <code>gbif_species_name_match</code> function supports matching with the GBIF taxonomic backbone.</p>
</div>
<div id="aim" class="section level2">
<h2 class="hasAnchor">
<a href="#aim" class="anchor"></a>Aim</h2>
<p>This function provides the functionality to add the species information from the GBIF backbone to <strong>any data table (<code>data.frame</code>)</strong> by requesting this information via the GBIF API. For each match, the corresponding accepted name is looked for. Nevertheless there will always be errors and control is still required!</p>
</div>
<div id="functionality" class="section level2">
<h2 class="hasAnchor">
<a href="#functionality" class="anchor"></a>Functionality</h2>
<p>The <code>gbif_species_name_match</code> function extends the matching function provided by <a href="https://github.com/ropensci/rgbif">rgbif</a> to be compatible with a <code>data.frame</code> data structure.</p>
<p>Loading the functionality can be done by loading the <code>inborutils</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/inbo/inborutils">inborutils</a></span><span class="op">)</span></code></pre></div>
<p>Consider the example data set <code>species_example</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">species_example</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">speciesName</th>
<th align="left">kingdom</th>
<th align="left">euConcernStatus</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Alopochen aegyptiaca</td>
<td align="left">Animalia</td>
<td align="left">under consideration</td>
</tr>
<tr class="even">
<td align="left">Cotoneaster ganghobaensis</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Cotoneaster hylmoei</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>To add the species information, using the <code>scientificName</code> column, and the default fields:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_data_update</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gbif_species_name_match.html">gbif_species_name_match</a></span><span class="op">(</span><span class="va">species_example</span>, 
                                          name <span class="op">=</span> <span class="st">"speciesName"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "All column names present"</code></pre>
<pre><code>## New names:
## * kingdom -&gt; kingdom...2
## * kingdom -&gt; kingdom...10</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">my_data_update</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="11%">
<col width="5%">
<col width="8%">
<col width="3%">
<col width="19%">
<col width="3%">
<col width="5%">
<col width="4%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="6%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="left">speciesName</th>
<th align="left">kingdom…2</th>
<th align="left">euConcernStatus</th>
<th align="right">usageKey</th>
<th align="left">scientificName</th>
<th align="left">rank</th>
<th align="left">order</th>
<th align="left">matchType</th>
<th align="left">phylum</th>
<th align="left">kingdom…10</th>
<th align="left">genus</th>
<th align="left">class</th>
<th align="right">confidence</th>
<th align="left">synonym</th>
<th align="left">status</th>
<th align="left">family</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Alopochen aegyptiaca</td>
<td align="left">Animalia</td>
<td align="left">under consideration</td>
<td align="right">2498252</td>
<td align="left">Alopochen aegyptiaca (Linnaeus, 1766)</td>
<td align="left">SPECIES</td>
<td align="left">Anseriformes</td>
<td align="left">EXACT</td>
<td align="left">Chordata</td>
<td align="left">Animalia</td>
<td align="left">Alopochen</td>
<td align="left">Aves</td>
<td align="right">98</td>
<td align="left">FALSE</td>
<td align="left">ACCEPTED</td>
<td align="left">Anatidae</td>
</tr>
<tr class="even">
<td align="left">Cotoneaster ganghobaensis</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
<td align="right">3025989</td>
<td align="left">Cotoneaster ganghobaensis J.Fryer &amp; B.Hylmö</td>
<td align="left">SPECIES</td>
<td align="left">Rosales</td>
<td align="left">EXACT</td>
<td align="left">Tracheophyta</td>
<td align="left">Plantae</td>
<td align="left">Cotoneaster</td>
<td align="left">Magnoliopsida</td>
<td align="right">98</td>
<td align="left">FALSE</td>
<td align="left">ACCEPTED</td>
<td align="left">Rosaceae</td>
</tr>
<tr class="odd">
<td align="left">Cotoneaster hylmoei</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
<td align="right">3025758</td>
<td align="left">Cotoneaster hylmoei K.E.Flinck &amp; J.Fryer</td>
<td align="left">SPECIES</td>
<td align="left">Rosales</td>
<td align="left">EXACT</td>
<td align="left">Tracheophyta</td>
<td align="left">Plantae</td>
<td align="left">Cotoneaster</td>
<td align="left">Magnoliopsida</td>
<td align="right">98</td>
<td align="left">FALSE</td>
<td align="left">ACCEPTED</td>
<td align="left">Rosaceae</td>
</tr>
</tbody>
</table>
<p>When not satisfied by the default fields provided ´(‘usageKey’,‘scientificName’,‘rank’,‘order’,‘matchType’,‘phylum’, ‘kingdom’,‘genus’, ‘class’,‘confidence’, ‘synonym’, ‘status’,‘family’)´, you can alter these by the <code>gbif_terms</code> argument, for example:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gbif_terms_to_use</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'canonicalName'</span>, <span class="st">'order'</span><span class="op">)</span>
<span class="va">my_data_update</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gbif_species_name_match.html">gbif_species_name_match</a></span><span class="op">(</span><span class="va">species_example</span>, 
                                              name <span class="op">=</span> <span class="st">"speciesName"</span> , 
                                              gbif_terms <span class="op">=</span> <span class="va">gbif_terms_to_use</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "All column names present"</code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">my_data_update</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="27%">
<col width="9%">
<col width="21%">
<col width="27%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">speciesName</th>
<th align="left">kingdom</th>
<th align="left">euConcernStatus</th>
<th align="left">canonicalName</th>
<th align="left">order</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Alopochen aegyptiaca</td>
<td align="left">Animalia</td>
<td align="left">under consideration</td>
<td align="left">Alopochen aegyptiaca</td>
<td align="left">Anseriformes</td>
</tr>
<tr class="even">
<td align="left">Cotoneaster ganghobaensis</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
<td align="left">Cotoneaster ganghobaensis</td>
<td align="left">Rosales</td>
</tr>
<tr class="odd">
<td align="left">Cotoneaster hylmoei</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
<td align="left">Cotoneaster hylmoei</td>
<td align="left">Rosales</td>
</tr>
</tbody>
</table>
<p>If the name of a GBIF field is already in use as column name in your data.frame, the suffix number <code>1</code> is added and a warning is returned. For example:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">species_example</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"scientificName"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">species_example</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>
<span class="va">gbif_terms_to_use</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'scientificName'</span>, <span class="st">'order'</span><span class="op">)</span>
<span class="va">my_data_update</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gbif_species_name_match.html">gbif_species_name_match</a></span><span class="op">(</span><span class="va">df</span>,
                                          name <span class="op">=</span> <span class="st">"scientificName"</span> , 
                                          gbif_terms <span class="op">=</span> <span class="va">gbif_terms_to_use</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "All column names present"</code></pre>
<pre><code>## Warning in gbif_species_name_match(df, name = "scientificName", gbif_terms
## = gbif_terms_to_use): Column with names 'scientificName' is also one
## of the returned gbif_terms. GBIF column name is authomatically recalled
## 'scientificName1'.</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">my_data_update</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="23%">
<col width="8%">
<col width="17%">
<col width="39%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">scientificName…1</th>
<th align="left">kingdom</th>
<th align="left">euConcernStatus</th>
<th align="left">scientificName…4</th>
<th align="left">order</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Alopochen aegyptiaca</td>
<td align="left">Animalia</td>
<td align="left">under consideration</td>
<td align="left">Alopochen aegyptiaca (Linnaeus, 1766)</td>
<td align="left">Anseriformes</td>
</tr>
<tr class="even">
<td align="left">Cotoneaster ganghobaensis</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
<td align="left">Cotoneaster ganghobaensis J.Fryer &amp; B.Hylmö</td>
<td align="left">Rosales</td>
</tr>
<tr class="odd">
<td align="left">Cotoneaster hylmoei</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
<td align="left">Cotoneaster hylmoei K.E.Flinck &amp; J.Fryer</td>
<td align="left">Rosales</td>
</tr>
</tbody>
</table>
<p>Sometimes, a scientific name can occur in different kingdoms, the so-called <em>hemihomonyms</em>. To avoid a taxon being misidentified, it is then sometimes useful to specify kingdom it belongs to. You could also add other taxonomic related parameters such as rank, family or genus. It is also possible to pass other not taxonomic related parameters, e.g. <code>strict</code> which allows more control on the match behavior. For more information about all parameters accepted by GBIF, see documentation on <a href="https://www.gbif.org/developer/species#searching">GBIF match</a>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_data_update</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gbif_species_name_match.html">gbif_species_name_match</a></span><span class="op">(</span><span class="va">species_example</span>, 
                                          name <span class="op">=</span> <span class="st">"speciesName"</span>,
                                          kingdom <span class="op">=</span> <span class="st">"kingdom"</span>,
                                          strict <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "All column names present"</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">my_data_update</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="11%">
<col width="5%">
<col width="8%">
<col width="3%">
<col width="19%">
<col width="3%">
<col width="5%">
<col width="4%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="6%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="left">speciesName</th>
<th align="left">kingdom…2</th>
<th align="left">euConcernStatus</th>
<th align="right">usageKey</th>
<th align="left">scientificName</th>
<th align="left">rank</th>
<th align="left">order</th>
<th align="left">matchType</th>
<th align="left">phylum</th>
<th align="left">kingdom…10</th>
<th align="left">genus</th>
<th align="left">class</th>
<th align="right">confidence</th>
<th align="left">synonym</th>
<th align="left">status</th>
<th align="left">family</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Alopochen aegyptiaca</td>
<td align="left">Animalia</td>
<td align="left">under consideration</td>
<td align="right">2498252</td>
<td align="left">Alopochen aegyptiaca (Linnaeus, 1766)</td>
<td align="left">SPECIES</td>
<td align="left">Anseriformes</td>
<td align="left">EXACT</td>
<td align="left">Chordata</td>
<td align="left">Animalia</td>
<td align="left">Alopochen</td>
<td align="left">Aves</td>
<td align="right">100</td>
<td align="left">FALSE</td>
<td align="left">ACCEPTED</td>
<td align="left">Anatidae</td>
</tr>
<tr class="even">
<td align="left">Cotoneaster ganghobaensis</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
<td align="right">3025989</td>
<td align="left">Cotoneaster ganghobaensis J.Fryer &amp; B.Hylmö</td>
<td align="left">SPECIES</td>
<td align="left">Rosales</td>
<td align="left">EXACT</td>
<td align="left">Tracheophyta</td>
<td align="left">Plantae</td>
<td align="left">Cotoneaster</td>
<td align="left">Magnoliopsida</td>
<td align="right">100</td>
<td align="left">FALSE</td>
<td align="left">ACCEPTED</td>
<td align="left">Rosaceae</td>
</tr>
<tr class="odd">
<td align="left">Cotoneaster hylmoei</td>
<td align="left">Plantae</td>
<td align="left">NA</td>
<td align="right">3025758</td>
<td align="left">Cotoneaster hylmoei K.E.Flinck &amp; J.Fryer</td>
<td align="left">SPECIES</td>
<td align="left">Rosales</td>
<td align="left">EXACT</td>
<td align="left">Tracheophyta</td>
<td align="left">Plantae</td>
<td align="left">Cotoneaster</td>
<td align="left">Magnoliopsida</td>
<td align="right">100</td>
<td align="left">FALSE</td>
<td align="left">ACCEPTED</td>
<td align="left">Rosaceae</td>
</tr>
</tbody>
</table>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Hans Van Calster, Damiano Oldoni, Stijn Van Hoey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
